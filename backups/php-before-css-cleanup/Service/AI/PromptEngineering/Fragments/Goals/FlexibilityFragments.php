<?php
/**
 * FlexibilityFragments - Flexibility & Mobility Training Goal Fragments
 * 
 * Specialized prompt fragments for users focused on flexibility, mobility, and movement quality.
 * Emphasizes range of motion, injury prevention, and movement preparation.
 */

namespace FitCopilot\Service\AI\PromptEngineering\Fragments\Goals;

// Exit if accessed directly
if (!defined('ABSPATH')) {
    exit;
}

/**
 * FlexibilityFragments Class
 * 
 * Provides flexibility-focused prompt fragments for workout generation
 */
class FlexibilityFragments {
    
    /**
     * Get core flexibility training principles
     *
     * @return string Flexibility training guidance
     */
    public static function getCoreFlexibilityPrinciples(): string {
        return "FLEXIBILITY TRAINING PRINCIPLES:\n" .
               "- **Consistency Over Intensity**: Regular, gentle stretching more effective than sporadic intense sessions\n" .
               "- **Warm Tissue Priority**: Stretch after light movement or warm-up\n" .
               "- **Pain-Free Range**: Work within comfortable range, avoiding painful stretches\n" .
               "- **Breathing Integration**: Use deep, rhythmic breathing to enhance relaxation\n" .
               "- **Progressive Development**: Gradually increase range of motion over time\n" .
               "- **Functional Focus**: Emphasize movements that improve daily life activities\n\n";
    }
    
    /**
     * Get flexibility-specific exercise selection
     *
     * @return string Exercise selection for flexibility goals
     */
    public static function getFlexibilityExerciseSelection(): string {
        return "FLEXIBILITY EXERCISE SELECTION:\n" .
               "- **Static Stretching**: Hold stretches for 15-60 seconds\n" .
               "- **Dynamic Mobility**: Controlled movement through range of motion\n" .
               "- **PNF Stretching**: Proprioceptive neuromuscular facilitation techniques\n" .
               "- **Yoga Poses**: Traditional yoga postures for flexibility and balance\n" .
               "- **Myofascial Release**: Foam rolling and self-massage techniques\n" .
               "- **Joint Mobility**: Focused joint circles and articulation exercises\n\n";
    }
    
    /**
     * Get flexibility intensity and duration guidelines
     *
     * @return string Intensity protocols for flexibility
     */
    public static function getFlexibilityIntensityGuidelines(): string {
        return "FLEXIBILITY INTENSITY GUIDELINES:\n" .
               "- **Gentle Tension**: Stretch to point of mild tension, not pain\n" .
               "- **Hold Duration**: 15-30 seconds for maintenance, 30-60 seconds for improvement\n" .
               "- **Repetition**: 2-4 repetitions per stretch\n" .
               "- **Frequency**: Daily for best results, minimum 3 times per week\n" .
               "- **Breathing Pattern**: 4-6 deep breaths per stretch hold\n" .
               "- **Relaxation Focus**: Use stretching time for mental relaxation\n\n";
    }
    
    /**
     * Get flexibility workout structures
     *
     * @return string Different flexibility workout formats
     */
    public static function getFlexibilityWorkoutStructures(): string {
        return "FLEXIBILITY WORKOUT STRUCTURES:\n" .
               "- **Full Body Flow (20-30 minutes)**: Complete body stretching sequence\n" .
               "- **Targeted Focus (10-15 minutes)**: Specific body region emphasis\n" .
               "- **Morning Mobility (5-10 minutes)**: Gentle activation routine\n" .
               "- **Post-Workout Recovery (10-15 minutes)**: Cool-down stretching\n" .
               "- **Yoga Practice (30-60 minutes)**: Traditional yoga sequence\n" .
               "- **Desk Break Routine (3-5 minutes)**: Quick workplace stretches\n\n";
    }
    
    /**
     * Get flexibility progression strategies
     *
     * @return string How to progress flexibility training
     */
    public static function getFlexibilityProgressionStrategies(): string {
        return "FLEXIBILITY PROGRESSION STRATEGIES:\n" .
               "- **Range Progression**: Gradually increase stretch depth over weeks\n" .
               "- **Duration Progression**: Extend hold times from 15 to 60 seconds\n" .
               "- **Frequency Progression**: Add additional daily stretch sessions\n" .
               "- **Complexity Progression**: Advance from basic to compound stretches\n" .
               "- **Technique Progression**: Master static before advancing to PNF\n" .
               "- **Integration Progression**: Combine stretching with strength training\n\n";
    }
    
    /**
     * Get flexibility equipment recommendations
     *
     * @return string Equipment for flexibility training
     */
    public static function getFlexibilityEquipmentRecommendations(): string {
        return "FLEXIBILITY EQUIPMENT RECOMMENDATIONS:\n" .
               "- **Essential**: Yoga mat, comfortable clothing\n" .
               "- **Helpful Tools**: Yoga blocks, straps, bolsters\n" .
               "- **Myofascial Release**: Foam roller, massage balls, lacrosse ball\n" .
               "- **Support Props**: Wall, chair, towel for assistance\n" .
               "- **Comfort Items**: Pillow, blanket for relaxation poses\n" .
               "- **No Equipment**: Many effective stretches require no tools\n\n";
    }
    
    /**
     * Get flexibility safety considerations
     *
     * @return string Safety protocols for flexibility training
     */
    public static function getFlexibilitySafetyProtocols(): string {
        return "FLEXIBILITY SAFETY PROTOCOLS:\n" .
               "- **Never Bounce**: Avoid ballistic stretching that forces range of motion\n" .
               "- **Pain Awareness**: Stop if experiencing sharp or shooting pain\n" .
               "- **Joint Protection**: Support joints during stretches\n" .
               "- **Injury Precaution**: Avoid stretching recently injured areas\n" .
               "- **Balance Safety**: Use wall or chair support for standing stretches\n" .
               "- **Medical Clearance**: Consult healthcare provider for chronic pain or injuries\n\n";
    }
    
    /**
     * Get flexibility motivation strategies
     *
     * @return string Psychological aspects of flexibility training
     */
    public static function getFlexibilityMotivationStrategies(): string {
        return "FLEXIBILITY MOTIVATION STRATEGIES:\n" .
               "- **Stress Relief Focus**: Emphasize mental relaxation benefits\n" .
               "- **Daily Habit**: Integrate into morning or bedtime routine\n" .
               "- **Progress Documentation**: Photo or video progress tracking\n" .
               "- **Mindfulness Practice**: Use stretching as meditation time\n" .
               "- **Social Connection**: Join yoga classes or stretch with friends\n" .
               "- **Immediate Benefits**: Notice improved energy and reduced tension\n\n";
    }
    
    /**
     * Get targeted flexibility areas
     *
     * @return string Common tight areas and specific stretches
     */
    public static function getTargetedFlexibilityAreas(): string {
        return "TARGETED FLEXIBILITY AREAS:\n" .
               "- **Hip Flexors**: Combat sitting posture, improve hip mobility\n" .
               "- **Hamstrings**: Posterior chain flexibility for back health\n" .
               "- **Shoulders/Chest**: Counter forward head posture from desk work\n" .
               "- **Calves/Ankles**: Lower leg mobility for movement quality\n" .
               "- **Spine**: Thoracic and lumbar mobility for back health\n" .
               "- **Neck**: Release tension from stress and poor posture\n\n";
    }
    
    /**
     * Get flexibility benefits and outcomes
     *
     * @return string Expected benefits from flexibility training
     */
    public static function getFlexibilityBenefitsOutcomes(): string {
        return "FLEXIBILITY TRAINING BENEFITS:\n" .
               "- **Injury Prevention**: Reduced risk of muscle strains and joint injuries\n" .
               "- **Performance Enhancement**: Improved movement efficiency and power\n" .
               "- **Pain Reduction**: Decreased muscle tension and joint stiffness\n" .
               "- **Stress Relief**: Mental relaxation and anxiety reduction\n" .
               "- **Posture Improvement**: Better alignment and reduced postural dysfunction\n" .
               "- **Quality of Life**: Enhanced daily movement and activity comfort\n\n";
    }
    
    /**
     * Get complete flexibility training fragment
     *
     * @param array $context Additional context data
     * @return string Complete flexibility fragment
     */
    public static function getCompleteFlexibilityFragment(array $context = []): string {
        $fragment = self::getCoreFlexibilityPrinciples();
        $fragment .= self::getFlexibilityExerciseSelection();
        $fragment .= self::getFlexibilityIntensityGuidelines();
        $fragment .= self::getFlexibilityWorkoutStructures();
        
        // Add contextual fragments based on available data
        if (!empty($context['include_progression'])) {
            $fragment .= self::getFlexibilityProgressionStrategies();
        }
        
        if (!empty($context['include_equipment'])) {
            $fragment .= self::getFlexibilityEquipmentRecommendations();
        }
        
        if (!empty($context['include_safety'])) {
            $fragment .= self::getFlexibilitySafetyProtocols();
        }
        
        if (!empty($context['include_motivation'])) {
            $fragment .= self::getFlexibilityMotivationStrategies();
        }
        
        if (!empty($context['include_targeted_areas'])) {
            $fragment .= self::getTargetedFlexibilityAreas();
        }
        
        if (!empty($context['include_benefits'])) {
            $fragment .= self::getFlexibilityBenefitsOutcomes();
        }
        
        return $fragment;
    }
    
    /**
     * Get flexibility adaptations by fitness level
     *
     * @param string $fitness_level User's fitness level
     * @return string Level-appropriate flexibility guidance
     */
    public static function getFlexibilityAdaptationsByLevel(string $fitness_level): string {
        switch (strtolower($fitness_level)) {
            case 'beginner':
                return "BEGINNER FLEXIBILITY ADAPTATIONS:\n" .
                       "- Start with 5-10 minutes of gentle stretching\n" .
                       "- Hold stretches for 15-20 seconds initially\n" .
                       "- Focus on major muscle groups and basic poses\n" .
                       "- Use props and assistance as needed\n" .
                       "- Emphasize breathing and relaxation\n\n";
                       
            case 'intermediate':
                return "INTERMEDIATE FLEXIBILITY ADAPTATIONS:\n" .
                       "- Extend sessions to 15-25 minutes\n" .
                       "- Hold stretches for 30-45 seconds\n" .
                       "- Include dynamic mobility and PNF techniques\n" .
                       "- Work on specific tight areas and imbalances\n" .
                       "- Combine with strength training for balanced approach\n\n";
                       
            case 'advanced':
                return "ADVANCED FLEXIBILITY ADAPTATIONS:\n" .
                       "- Practice 30-60 minute comprehensive sessions\n" .
                       "- Hold stretches for 45-60 seconds or longer\n" .
                       "- Master advanced yoga poses and movements\n" .
                       "- Use advanced techniques like contract-relax stretching\n" .
                       "- Focus on movement integration and functional patterns\n\n";
                       
            default:
                return self::getFlexibilityAdaptationsByLevel('intermediate');
        }
    }
    
    /**
     * Get flexibility adaptations by time of day
     *
     * @param string $time_period Time of day (morning, afternoon, evening)
     * @return string Time-appropriate flexibility guidance
     */
    public static function getFlexibilityAdaptationsByTime(string $time_period): string {
        switch (strtolower($time_period)) {
            case 'morning':
                return "MORNING FLEXIBILITY PROTOCOL:\n" .
                       "- Gentle mobilization to wake up the body\n" .
                       "- Dynamic stretching to increase circulation\n" .
                       "- Focus on spine mobility and joint lubrication\n" .
                       "- 5-10 minutes to energize for the day\n\n";
                       
            case 'afternoon':
                return "AFTERNOON FLEXIBILITY PROTOCOL:\n" .
                       "- Counter desk posture and sitting stiffness\n" .
                       "- Target hip flexors, shoulders, and neck\n" .
                       "- Use as mental break and stress relief\n" .
                       "- 3-8 minutes for workplace wellness\n\n";
                       
            case 'evening':
                return "EVENING FLEXIBILITY PROTOCOL:\n" .
                       "- Deep, relaxing stretches to unwind\n" .
                       "- Static holds with focus on breathing\n" .
                       "- Release tension from the day\n" .
                       "- 10-20 minutes for recovery and relaxation\n\n";
                       
            default:
                return self::getFlexibilityAdaptationsByTime('evening');
        }
    }
    
    /**
     * Get available fragment types
     *
     * @return array List of available fragment methods
     */
    public static function getAvailableFragments(): array {
        return [
            'core_principles' => 'Fundamental flexibility training principles',
            'exercise_selection' => 'Exercise selection for flexibility development',
            'intensity_guidelines' => 'Intensity and duration protocols',
            'workout_structures' => 'Different flexibility workout formats',
            'progression_strategies' => 'Methods for flexibility progression',
            'equipment_recommendations' => 'Equipment for flexibility training',
            'safety_protocols' => 'Safety considerations for stretching',
            'motivation_strategies' => 'Psychological aspects of flexibility training',
            'targeted_areas' => 'Common tight areas and specific focuses',
            'benefits_outcomes' => 'Expected benefits from flexibility training',
            'level_adaptations' => 'Fitness level-specific flexibility adaptations',
            'time_adaptations' => 'Time of day-specific flexibility protocols'
        ];
    }
} 